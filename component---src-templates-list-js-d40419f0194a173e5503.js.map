{"version":3,"sources":["webpack:///./src/components/useAuthors.js","webpack:///./src/components/authors.js","webpack:///./src/templates/list.js"],"names":["useAuthors","useStaticQuery","settingsJson","authors","AuthorsForm","label","fields","name","component","itemProps","item","key","id","defaultItem","Math","random","toString","substr","email","link","parse","value","List","data","pageContext","page","useLocalJsonForm","ListForm","slug","numPages","limit","skip","currentPage","isFirst","isLast","prevPage","nextPage","title","posts","edges","map","article","node","frontmatter","draft","to","path","excerpt","ListNav","rel","styled","div","filename","uploadDir","previewSrc","formValues","jsonNode","hero","image","childImageSharp","fluid","src"],"mappings":"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","file":"component---src-templates-list-js-d40419f0194a173e5503.js","sourcesContent":["import { useStaticQuery, graphql } from \"gatsby\"\n\nexport const useAuthors = () => {\n  const { settingsJson } = useStaticQuery(\n    graphql`\n      query authorsQuery {\n        settingsJson(\n          fileRelativePath: { eq: \"/content/settings/authors.json\" }\n        ) {\n          ...authors\n        }\n      }\n    `\n  )\n\n  return settingsJson.authors\n}\n\nexport const authorsFragment = graphql`\n  fragment authors on SettingsJson {\n    authors {\n      email\n      name\n      id\n      link\n    }\n  }\n`\n","import { useAuthors } from \"./useAuthors\"\n\nexport const ListAuthors = ({ authorIDs }) => {\n  const authors = useAuthors().filter(author =>\n    authorIDs.find(id => id === author.id)\n  )\n\n  const authorList = authors.map((author, index) => {\n    if (authors.length === index + 1) {\n      return author.name\n    } else {\n      return author.name + \", \"\n    }\n  })\n\n  return authorList\n}\n\nexport const AuthorsForm = {\n  label: \"Authors\",\n  fields: [\n    {\n      label: \"Authors\",\n      name: \"rawJson.authors\",\n      component: \"group-list\",\n      itemProps: item => ({\n        key: item.id,\n        label: item.name,\n      }),\n      defaultItem: () => ({\n        name: \"New Author\",\n        id: Math.random()\n          .toString(36)\n          .substr(2, 9),\n        email: \"\",\n        link: \"\",\n      }),\n      fields: [\n        {\n          label: \"Name\",\n          name: \"name\",\n          component: \"text\",\n          parse(value) {\n            return value || \"\"\n          },\n        },\n        {\n          label: \"Email\",\n          name: \"email\",\n          component: \"text\",\n          parse(value) {\n            return value || \"\"\n          },\n        },\n        {\n          label: \"Link\",\n          name: \"link\",\n          component: \"text\",\n          parse(value) {\n            return value || \"\"\n          },\n        },\n      ],\n    },\n  ],\n}\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\nimport styled from \"styled-components\"\nimport { useLocalJsonForm } from \"gatsby-tinacms-json\"\n\nimport {\n  Paper,\n  Meta,\n  MetaSpan,\n  MetaActions,\n  DraftBadge,\n} from \"../components/style\"\nimport { ListAuthors, AuthorsForm } from \"../components/authors\"\nimport { Link } from \"gatsby\"\nimport { PageLayout } from \"../components/pageLayout\"\n\nexport default function List({ data, pageContext }) {\n  const [page] = useLocalJsonForm(data.page, ListForm)\n  const [authors] = useLocalJsonForm(data.authors, AuthorsForm)\n\n  const { slug, limit, skip, numPages, currentPage } = pageContext\n  const isFirst = currentPage === 1\n  const isLast = currentPage === numPages\n  const prevPage =\n    currentPage - 1 === 1 ? slug : slug + \"/\" + (currentPage - 1).toString()\n  const nextPage = slug + \"/\" + (currentPage + 1).toString()\n  page.title = isFirst ? page.title : page.title + \" - \" + currentPage\n\n  return (\n    <PageLayout page={page}>\n      <>\n        {data.posts &&\n          data.posts.edges.map((item) => {\n            return (\n              <Paper article key={item.node.id}>\n                {item.node.frontmatter.draft && <DraftBadge>Draft</DraftBadge>}\n                <h2>\n                  <Link to={item.node.frontmatter.path}>\n                    {item.node.frontmatter.title}\n                  </Link>\n                </h2>\n                <p>{item.node.excerpt}</p>\n                <Meta>\n                  {/*<MetaSpan>{item.node.frontmatter.date}</MetaSpan>\n                  {item.node.frontmatter.authors && (\n                    <MetaSpan>\n                      <em>By</em>&nbsp;\n                      <ListAuthors authorIDs={item.node.frontmatter.authors} />\n                    </MetaSpan>\n                  )}*/}\n                  <MetaActions>\n                    <Link to={item.node.frontmatter.path}>Read More →</Link>\n                  </MetaActions>\n                </Meta>\n              </Paper>\n            )\n          })}\n        <ListNav>\n          {!isFirst && (\n            <Link to={prevPage} rel=\"prev\">\n              ← Previous\n            </Link>\n          )}\n          {!isLast && (\n            <Link to={nextPage} rel=\"next\">\n              Next →\n            </Link>\n          )}\n        </ListNav>\n      </>\n    </PageLayout>\n  )\n}\n\nexport const pageQuery = graphql`\n  query($listType: String!, $slug: String!, $skip: Int!, $limit: Int!) {\n    page: pagesJson(path: { eq: $slug }) {\n      path\n      title\n      hero {\n        headline\n        textline\n        large\n        overlay\n        ctas {\n          label\n          link\n          primary\n          arrow\n        }\n        image {\n          childImageSharp {\n            fluid(quality: 70, maxWidth: 1920) {\n              ...GatsbyImageSharpFluid_withWebp\n            }\n          }\n        }\n      }\n      listType\n      rawJson\n      fileRelativePath\n    }\n    posts: allMarkdownRemark(\n      sort: { order: DESC, fields: [frontmatter___date] }\n      filter: {\n        frontmatter: { type: { eq: $listType } }\n        published: { eq: true }\n      }\n      limit: $limit\n      skip: $skip\n    ) {\n      edges {\n        node {\n          id\n          excerpt\n          frontmatter {\n            date(formatString: \"MMMM DD, YYYY\")\n            path\n            title\n            draft\n            authors\n          }\n        }\n      }\n    }\n    authors: settingsJson(\n      fileRelativePath: { eq: \"/content/settings/authors.json\" }\n    ) {\n      ...authors\n\n      rawJson\n      fileRelativePath\n    }\n  }\n`\n\nexport const ListNav = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  a {\n    display: inline-block;\n    padding: 0.5rem 1rem;\n  }\n`\n\nconst ListForm = {\n  label: \"Page\",\n  fields: [\n    {\n      label: \"Title\",\n      name: \"rawJson.title\",\n      component: \"text\",\n    },\n    {\n      label: \"Hero\",\n      name: \"rawJson.hero\",\n      component: \"group\",\n      fields: [\n        {\n          label: \"Headline\",\n          name: \"headline\",\n          component: \"text\",\n        },\n        {\n          label: \"Textline\",\n          name: \"textline\",\n          component: \"text\",\n        },\n        {\n          label: \"Image\",\n          name: \"image\",\n          component: \"image\",\n          parse: (filename) => `../images/${filename}`,\n          uploadDir: () => `/content/images/`,\n          previewSrc: (formValues) => {\n            if (!formValues.jsonNode.hero || !formValues.jsonNode.hero.image)\n              return \"\"\n            return formValues.jsonNode.hero.image.childImageSharp.fluid.src\n          },\n        },\n        {\n          label: \"Actions\",\n          name: \"ctas\",\n          component: \"group-list\",\n          itemProps: (item) => ({\n            key: item.link,\n            label: item.label,\n          }),\n          fields: [\n            {\n              label: \"Label\",\n              name: \"label\",\n              component: \"text\",\n            },\n            {\n              label: \"Link\",\n              name: \"link\",\n              component: \"text\",\n            },\n            {\n              label: \"Primary\",\n              name: \"primary\",\n              component: \"toggle\",\n            },\n            {\n              label: \"Arrow\",\n              name: \"arrow\",\n              component: \"toggle\",\n            },\n          ],\n        },\n        {\n          label: \"Large\",\n          name: \"large\",\n          component: \"toggle\",\n        },\n      ],\n    },\n  ],\n}\n"],"sourceRoot":""}